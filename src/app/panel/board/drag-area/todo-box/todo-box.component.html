<div class="todo-box" draggable="true">
  <div *ngIf="responsiveService.isSmallScreen" class="changeCategory">
    <img
      *ngIf="task.status !== 'todo'"
      id="up"
      (click)="changeStatus('up')"
      src="./assets/img/down.png"
      style="rotate: 180deg"
      class="arrow"
    />
    <br />
    <img
      *ngIf="task.status !== 'done'"
      id="down"
      (click)="changeStatus('down')"
      src="./assets/img/down.png"
      class="arrow"
    />
  </div>
  <div
    (click)="helpers.toggleShowTask(task)"
    id="todoBoxHeader3"
    class="todo-box-header"
    [style]="{ backgroundColor: task.categoryColor }"
  >
    <h4>{{ task.category }}</h4>
  </div>

  <div (click)="helpers.toggleShowTask(task)" class="todo-box-title">
    <h3>{{ task.title }}</h3>
  </div>

  <div (click)="helpers.toggleShowTask(task)" class="todo-box-body">
    <p>{{ task.description }}</p>
  </div>
  <div>
    <div (click)="helpers.toggleShowTask(task)" class="todo-box-progress">
      <div class="todo-box-progress-bar">
        <div
          *ngIf="task.subtasks.length > 0"
          class="todo-box-progress-bar-fill"
          [style.width]="
            ((task.subtasks | completedSubtasks) * 100) / task.subtasks.length +
            '%'
          "
        ></div>
      </div>
      <p>
        {{ task.subtasks | completedSubtasks }}/{{ task.subtasks.length }}
        Done
      </p>
    </div>

    <div
      (click)="helpers.toggleShowTask(task)"
      id="todoBoxFooterBar3"
      class="todo-box-footer-bar"
    >
      <div class="todo-box-footer">
        <div class="todo-box-footer-right">
          <div
            *ngFor="let person of task.assigendTo | slice : 0 : 5"
            [style.backgroundColor]="person.color"
            class="todo-icon-name"
          >
            {{ person.firstName | getInitals
            }}{{ person.lastName | getInitals }}
          </div>
        </div>
        <div class="todo-box-footer-left">
          @if(task.priority ==='low'){
          <img src="../../../../assets/img/icons/low.png" />
          }@else if (task.priority ==='medium') {
          <img src="../../../../assets/img/icons/medium.png" />
          }@else {
          <img src="../../../../assets/img/icons/urgent.png" />
          }
        </div>
      </div>
    </div>
  </div>
</div>
